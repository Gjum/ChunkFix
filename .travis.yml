language: java
jdk:
- oraclejdk7
install:
- "./gradlew clean"
script:
- FORGE_VERSION=1.10.2-12.18.3.2254 ./gradlew reobf
- FORGE_VERSION=1.11.2-13.20.0.2260 ./gradlew reobf
branches:
  only:
  - master
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -rf $HOME/.gradle/caches/*/fileHashes/
- rm -rf $HOME/.gradle/caches/minecraft/deobfedDeps/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
before_deploy:
- git config --global user.email "builds@travis-ci.com"
- git config --global user.name "Travis CI"
- git tag -m "Development Build ${TRAVIS_BUILD_NUMBER}" "dev-build-${TRAVIS_BUILD_NUMBER}"
- git push -q ${GITHUB_REPO} --tags
deploy:
  provider: releases
  skip_cleanup: true
  file: build/libs/*.jar
  file_glob: true
  prerelease: true
  on:
    tags: false
